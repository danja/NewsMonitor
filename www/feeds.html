<!DOCTYPE html>
<html>
   <head> 
    <title>Feeds</title> 
  </head> 
   <script type="text/javascript" src="/js/jquery-1.10.2.js"></script>
   
   <script type="text/javascript" language="javascript">
		  
   // var url = "http://localhost:3030/feedreader/query?query=PREFIX+rss%3A+%3Chttp%3A%2F%2Fpurl.org%2Frss%2F1.0%2F%3E+%0D%0APREFIX+dcterms%3A%3Chttp%3A%2F%2Fpurl.org%2Fdc%2Fterms%2F%3E%0D%0APREFIX+foaf%3A%3Chttp%3A%2F%2Fxmlns.com%2Ffoaf%2F0.1%2F%3E%0D%0APREFIX+schema%3A%3Chttp%3A%2F%2Fschema.org%2F%3E%0D%0APREFIX+nm%3A+%3Chttp%3A%2F%2Fpurl.org%2Fstuff%2Fnewsmonitor%2F%3E%0D%0A%0D%0ASELECT+DISTINCT+%3Fentry+%3Ftitle+%3Fcontent+%3Fupdated+WHERE+%7B+%0D%0A%0D%0AGRAPH+%3Fg+%7B%0D%0A+++%3Fentry+a+schema%3Aarticle+.%0D%0A%0D%0A+++OPTIONAL+%7B+%3Fentry+nm%3AsourceFeed+%3Ffeed+.+%7D%0D%0A+++OPTIONAL+%7B+%3Fentry+dcterms%3Atitle+%3Ftitle+.+%7D%0D%0A+++OPTIONAL+%7B+%3Fentry+dcterms%3Aupdated+%3Fupdated+.+%7D%0D%0A+++OPTIONAL+%7B+%3Fentry+dcterms%3Asource+%3Fsource+.+%7D%0D%0A+++OPTIONAL+%7B+%3Fentry+schema%3AarticleBody+%3Fcontent+.+%7D%0D%0A+++OPTIONAL+%7B+%3Fentry+dcterms%3Acreator+%5Bfoaf%3Aname+%3Fauthor%5D+.+%7D%0D%0A+++%7D%0D%0A%7D%0D%0AORDER+BY+DESC%28%3Fupdated%29&output=xml";
   
   var url = "http://localhost:3030/feedreader/query?query=PREFIX+rss%3A+%3Chttp%3A%2F%2Fpurl.org%2Frss%2F1.0%2F%3E+%0D%0APREFIX+dcterms%3A%3Chttp%3A%2F%2Fpurl.org%2Fdc%2Fterms%2F%3E%0D%0APREFIX+foaf%3A%3Chttp%3A%2F%2Fxmlns.com%2Ffoaf%2F0.1%2F%3E%0D%0APREFIX+schema%3A%3Chttp%3A%2F%2Fschema.org%2F%3E%0D%0APREFIX+nm%3A+%3Chttp%3A%2F%2Fpurl.org%2Fstuff%2Fnewsmonitor%2F%3E%0D%0A%0D%0ASELECT+DISTINCT+%3FfeedTitle+%3FfeedHtml+%3FfeedAuthor+%3Fentry+%3Ftitle+%3Fcontent+%3Fupdated+%3Fauthor+WHERE+{+%0D%0A%0D%0AGRAPH+%3Fg+{%0D%0A+++%3Fentry+a+schema%3Aarticle+.%0D%0A++++++OPTIONAL+{+%3Fsource+dcterms%3Atitle+%3FfeedTitle+.+}%0D%0A++++++OPTIONAL+{+%3Fsource+nm%3AhtmlUrl+%3FfeedHtml+.+}%0D%0A++++++OPTIONAL+{+%3Fsource+dcterms%3Acreator+[foaf%3Aname+%3FfeedAuthor]+.+}%0D%0A++++++%0D%0A++++++OPTIONAL+{+%3Fentry+dcterms%3Asource+%3Fsource+.+}%0D%0A+++%23+++OPTIONAL+{+%3Fentry+nm%3AsourceFeed+%3Ffeed+.+}%0D%0A++++++OPTIONAL+{+%3Fentry+dcterms%3Atitle+%3Ftitle+.+}%0D%0A++++++OPTIONAL+{+%3Fentry+dcterms%3Aupdated+%3Fupdated+.+}%0D%0A++++++OPTIONAL+{+%3Fentry+schema%3AarticleBody+%3Fcontent+.+}%0D%0A++++++OPTIONAL+{+%3Fentry+dcterms%3Acreator+[foaf%3Aname+%3Fauthor]+.+}%0D%0A+++}%0D%0A}%0D%0AORDER+BY+DESC%28%3Fupdated%29&output=xml";
  //  http://localhost:3030/feedreader/query?query=PREFIX+rss%3A+%3Chttp%3A%2F%2Fpurl.org%2Frss%2F1.0%2F%3E+%0D%0APREFIX+dcterms%3A%3Chttp%3A%2F%2Fpurl.org%2Fdc%2Fterms%2F%3E%0D%0APREFIX+foaf%3A%3Chttp%3A%2F%2Fxmlns.com%2Ffoaf%2F0.1%2F%3E%0D%0APREFIX+schema%3A%3Chttp%3A%2F%2Fschema.org%2F%3E%0D%0APREFIX+nm%3A+%3Chttp%3A%2F%2Fpurl.org%2Fstuff%2Fnewsmonitor%2F%3E%0D%0A%0D%0ASELECT+DISTINCT+%3Fentry+%3Ftitle+%3Fcontent+%3Fupdated+WHERE+%7B+%0D%0A%0D%0AGRAPH+%3Fg+%7B%0D%0A+++%3Fentry+a+schema%3Aarticle+.%0D%0A%0D%0A+++OPTIONAL+%7B+%3Fentry+nm%3AsourceFeed+%3Ffeed+.+%7D%0D%0A+++OPTIONAL+%7B+%3Fentry+dcterms%3Atitle+%3Ftitle+.+%7D%0D%0A+++OPTIONAL+%7B+%3Fentry+dcterms%3Aupdated+%3Fupdated+.+%7D%0D%0A+++OPTIONAL+%7B+%3Fentry+dcterms%3Asource+%3Fsource+.+%7D%0D%0A+++OPTIONAL+%7B+%3Fentry+schema%3AarticleBody+%3Fcontent+.+%7D%0D%0A+++OPTIONAL+%7B+%3Fentry+dcterms%3Acreator+%5Bfoaf%3Aname+%3Fauthor%5D+.+%7D%0D%0A+++%7D%0D%0A%7D%0D%0AORDER+BY+DESC%28%3Fupdated%29&output=xml&stylesheet=&force-accept=text%2Fplain
  $(document).ready(function() {

$.get(url, function(xml) {
	  // $( "#results" ).html(xml);
	  alert( "Load was performed." );
	//  var xmlDoc = $.parseXML(xml);
	    var $xml = $(xml);
	    $xml.find("result").each(function() {
	       // $('#results').html($(this));
	       var r = $(this);
	      console.log("result = "+$(this) );
	      var source, title, updated;
	       $(this).find("binding[name='source']").each(function() {
		       	//	$("#results").append($(this).text());
		       	source = $(this).text();
		       });
	       $(this).find("binding[name='title']").each(function() {
	    //   	$("#results").append($(this).text());
	       	title = $(this).text();
	       });
	       $(this).find("binding[name='updated']").each(function() {
	       		//$("#results").append($(this).text());
	       	updated = $(this).text();
	       });
	       var entry = "<p><a href=\""+source+"\">"+title+"</a></p>";
	       entry += "<p>"+updated+"</p>";
	       $("#results").append(entry);
	    });
	  });
   });
   </script>
  <body> 
<h1>Feeds</h1> 
<p>
<a href="/index.html">Home</a>
</p>
<div id="results"></div>
</body>
</html>