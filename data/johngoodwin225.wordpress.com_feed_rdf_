<?xml version="1.0" encoding="UTF-8"?><rdf:RDF
	xmlns="http://purl.org/rss/1.0/"
	xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:admin="http://webns.net/mvcb/"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:georss="http://www.georss.org/georss" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" >
<channel rdf:about="http://johngoodwin225.wordpress.com">
	<title>John's Weblog</title>
	<link>http://johngoodwin225.wordpress.com</link>
	<description>Just another WordPress.com weblog</description>
	<dc:date>2014-04-24T12:36:47Z</dc:date>
		<sy:updatePeriod>hourly</sy:updatePeriod>
		<sy:updateFrequency>1</sy:updateFrequency>
	<sy:updateBase>2000-01-01T12:00+00:00</sy:updateBase>
	<admin:generatorAgent rdf:resource="http://wordpress.com/" />
	<items>
		<rdf:Seq>
					<rdf:li rdf:resource="http://johngoodwin225.wordpress.com/2014/03/28/visualising-the-location-graph-example-with-gephi-and-ordnance-survey-linked-data/"/>
					<rdf:li rdf:resource="http://johngoodwin225.wordpress.com/2014/03/26/all-roads-lead-to-experiments-with-gephi-linked-data-and-wikipedia/"/>
					<rdf:li rdf:resource="http://johngoodwin225.wordpress.com/2014/03/25/first-signs-for-me-of-linked-data-being-properly-linked/"/>
					<rdf:li rdf:resource="http://johngoodwin225.wordpress.com/2014/03/23/tell-me-about-hamsphire-linking-government-data-using-sparql-federation-2/"/>
					<rdf:li rdf:resource="http://johngoodwin225.wordpress.com/2014/03/22/federating-sparql-queries-across-government-linked-data/"/>
					<rdf:li rdf:resource="http://johngoodwin225.wordpress.com/2013/09/24/ordnance-survey-linked-data-the-search-api/"/>
					<rdf:li rdf:resource="http://johngoodwin225.wordpress.com/2013/09/06/ordnance-survey-names-gazetteer-illustrative-data/"/>
					<rdf:li rdf:resource="http://johngoodwin225.wordpress.com/2013/09/01/interview-in-odbms-org/"/>
					<rdf:li rdf:resource="http://johngoodwin225.wordpress.com/2013/08/26/experiments-with-schema-org/"/>
					<rdf:li rdf:resource="http://johngoodwin225.wordpress.com/2013/08/20/ordnance-survey-linked-data-plotting-sparql-query-results-in-os-openspace/"/>
				</rdf:Seq>
	</items>
</channel>
<item rdf:about="http://johngoodwin225.wordpress.com/2014/03/28/visualising-the-location-graph-example-with-gephi-and-ordnance-survey-linked-data/">
	<title>Visualising the Location Graph &#8211; example with Gephi and Ordnance Survey linked data</title>
	<link>http://johngoodwin225.wordpress.com/2014/03/28/visualising-the-location-graph-example-with-gephi-and-ordnance-survey-linked-data/</link>
	<dc:date>2014-03-28T11:56:22Z</dc:date>
	<dc:creator><![CDATA[John Goodwin]]></dc:creator>
			<dc:subject><![CDATA[linked data]]></dc:subject>
		<dc:subject><![CDATA[Semantic Web]]></dc:subject>
		<dc:subject><![CDATA[gephi]]></dc:subject>
		<dc:subject><![CDATA[Ordnance Survey]]></dc:subject>
	<description><![CDATA[This is arguably a simpler follow up to my previous blog post, and here I want to look at visualising Ordnance Survey linked data in Gephi. Now Gephi isn&#8217;t really a GIS, but it can be used to visualise the adjacency graph where regions are represented as nodes in a graph, and links represent adjacency [&#8230;]<img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=438&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></description>
	<content:encoded><![CDATA[<p>This is arguably a simpler follow up to my previous <a href="http://johngoodwin225.wordpress.com/2014/03/26/all-roads-lead-to-experiments-with-gephi-linked-data-and-wikipedia/">blog post</a>, and here I want to look at visualising <a href="http://data.ordnancesurvey.co.uk">Ordnance Survey linked</a> data in Gephi. Now Gephi isn&#8217;t really a GIS, but it can be used to visualise the adjacency graph where regions are represented as nodes in a graph, and links represent adjacency relationships.</p>
<p>The approach here will be very similar to the approach in my previous blog. The main difference is that you will need to use the Ordnance Survey SPARQL endpoint and not the DBpedia one. So this time in the Gephi semantic web importer enter the following endpoint URL:</p>
<p><a href="http://data.ordnancesurvey.co.uk/datasets/os-linked-data/apis/sparql">http://data.ordnancesurvey.co.uk/datasets/os-linked-data/apis/sparql</a></p>
<p>The Ordnance Survey endpoint returns <a href="http://www.w3.org/TeamSubmission/turtle/">turtle</a> by default, and Gephi does not seem to like this. I wanted to force the output as XML. I figured this could be done in the using a &#8216;REST parameter name&#8217; (output) with value equal to xml. This did not seem to work, so instead I had to do a bit of a hack. In the &#8216;query tag&#8230;&#8217; box you will need to change the value from &#8216;query&#8217; to &#8216;output=xml&amp;query&#8217;. You should see something like this in the Semantic Web Importer now:</p>
<p><a href="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-28-at-11-28-28.png"><img class="alignnone size-full wp-image-441" src="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-28-at-11-28-28.png?w=595&#038;h=490" alt="Screen Shot 2014-03-28 at 11.28.28" width="595" height="490" /></a></p>
<p>Now click on the query tab. If we want to, for example, view the adjacent graph for consistuencies we can enter the following query:</p>
<p><strong>prefix gephi:&lt;<a href="http://gephi.org/">http://gephi.org/</a>&gt;</strong><br />
<strong>construct {</strong><br />
<strong>?s gephi:label ?label .</strong><br />
<strong>?s gephi:lat ?lat .</strong><br />
<strong>?s gephi:long ?long .</strong><br />
<strong>?s &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches">http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches</a>&gt; ?o .}</strong><br />
<strong>where</strong><br />
<strong>{</strong><br />
<strong>?s a &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/admingeo/WestminsterConstituency">http://data.ordnancesurvey.co.uk/ontology/admingeo/WestminsterConstituency</a>&gt; .</strong><br />
<strong>?o a &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/admingeo/WestminsterConstituency">http://data.ordnancesurvey.co.uk/ontology/admingeo/WestminsterConstituency</a>&gt; .</strong><br />
<strong>?s &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches">http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches</a>&gt; ?o .</strong><br />
<strong>?s &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches">http://www.w3.org/2000/01/rdf-schema#label</a>&gt; ?label .</strong><br />
<strong>?s &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches">http://www.w3.org/2003/01/geo/wgs84_pos#lat</a>&gt; ?lat .</strong><br />
<strong>?s &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches">http://www.w3.org/2003/01/geo/wgs84_pos#long</a>&gt; ?long .</strong><br />
<strong>}</strong></p>
<p>and click &#8216;run&#8217;. To visualise the output you will need to follow the exact same steps mentioned <a href="http://johngoodwin225.wordpress.com/2014/03/26/all-roads-lead-to-experiments-with-gephi-linked-data-and-wikipedia/">here</a> (remember to recast the lat and long variables to decimal).</p>
<p>If we want to view adjacency of London Boroughs then we can do this with a similar query:</p>
<p><strong>prefix gephi:&lt;<a href="http://gephi.org/">http://gephi.org/</a>&gt;</strong><br />
<strong>construct {</strong><br />
<strong>?s gephi:label ?label .</strong><br />
<strong>?s gephi:lat ?lat .</strong><br />
<strong>?s gephi:long ?long .</strong><br />
<strong>?s &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches">http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches</a>&gt; ?o .}</strong><br />
<strong>where</strong><br />
<strong>{</strong><br />
<strong>?s a &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/admingeo/LondonBorough">http://data.ordnancesurvey.co.uk/ontology/admingeo/LondonBorough</a>&gt; .</strong><br />
<strong>?o a &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/admingeo/LondonBorough"><strong>http://data.ordnancesurvey.co.uk/ontology/admingeo/LondonBorough</strong></a>&gt; .</strong><br />
<strong>?s &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches">http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches</a>&gt; ?o .</strong><br />
<strong>?s &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches">http://www.w3.org/2000/01/rdf-schema#label</a>&gt; ?label .</strong><br />
<strong>?s &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches">http://www.w3.org/2003/01/geo/wgs84_pos#lat</a>&gt; ?lat .</strong><br />
<strong>?s &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches">http://www.w3.org/2003/01/geo/wgs84_pos#long</a>&gt; ?long .</strong><br />
<strong>}</strong></p>
<p>When visualising you might want to change the scale parameter to 10000.0. You should see something like this:</p>
<p><a href="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-28-at-11-40-18.png"><img class="alignnone size-full wp-image-442" src="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-28-at-11-40-18.png?w=595&#038;h=407" alt="Screen Shot 2014-03-28 at 11.40.18" width="595" height="407" /></a></p>
<p>So far so good. Now imagine we want to bring in some other data &#8211; recall my previous blog post <a href="http://johngoodwin225.wordpress.com/2014/03/23/tell-me-about-hamsphire-linking-government-data-using-sparql-federation-2/">here</a>. We can use SPARQL federation to bring in data from other endpoints. Suppose we would like to make the size of the node represent the &#8216;<a href="http://opendatacommunities.org/def/IMD#IMD-rank">IMD rank</a>&#8216; of each London Borough&#8230;we can do with by bringing in data from the <a href="http://opendatacommunities.org">Open Data Communities site</a>:</p>
<p><strong>prefix gephi:&lt;<a href="http://gephi.org/">http://gephi.org/</a>&gt;</strong><br />
<strong>construct {</strong><br />
<strong>?s gephi:label ?label .</strong><br />
<strong>?s gephi:lat ?lat .</strong><br />
<strong>?s gephi:long ?long .</strong><br />
<strong>?s gephi:imd-rank ?imdrank .</strong><br />
<strong>?s &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches">http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches</a>&gt; ?o .}</strong><br />
<strong>where</strong><br />
<strong>{</strong><br />
<strong>?s a &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/admingeo/LondonBorough">http://data.ordnancesurvey.co.uk/ontology/admingeo/LondonBorough</a>&gt; .</strong><br />
<strong>?o a &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/admingeo/LondonBorough">http://data.ordnancesurvey.co.uk/ontology/admingeo/LondonBorough</a>&gt; .</strong><br />
<strong>?s &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches">http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches</a>&gt; ?o .</strong><br />
<strong>?s &lt;<a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a>&gt; ?label .</strong><br />
<strong>?s &lt;<a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2003/01/geo/wgs84_pos#lat</a>&gt; ?lat .</strong><br />
<strong>?s &lt;<a href="http://www.w3.org/2003/01/geo/wgs84_pos#long">http://www.w3.org/2003/01/geo/wgs84_pos#long</a>&gt; ?long .</strong><br />
<strong> SERVICE &lt;<a href="http://opendatacommunities.org/sparql">http://opendatacommunities.org/sparql</a>&gt; {</strong><br />
<strong> ?x &lt;<a href="http://purl.org/linked-data/sdmx/2009/dimension#refArea">http://purl.org/linked-data/sdmx/2009/dimension#refArea</a>&gt; ?s .</strong><br />
<strong>?x &lt;<a href="http://opendatacommunities.org/def/IMD#IMD-score">http://opendatacommunities.org/def/IMD#IMD-score</a>&gt; ?imdrank . }</strong><br />
<strong>}</strong></p>
<p>You will need to recast the imdrank as an integer for what follows (do this using the same approach used to recast the lat/long variables). You can now use Gephi to resize the nodes according to IMD rank. We do this using the ranking tab:</p>
<p><a href="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-28-at-11-50-43.png"><img class="alignnone size-full wp-image-443" src="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-28-at-11-50-43.png?w=595" alt="Screen Shot 2014-03-28 at 11.50.43"   /></a></p>
<p>You should now see you London Boroughs re-sized according to their IMD rank:</p>
<p><a href="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-28-at-11-51-51.png"><img class="alignnone size-full wp-image-444" src="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-28-at-11-51-51.png?w=595&#038;h=421" alt="Screen Shot 2014-03-28 at 11.51.51" width="595" height="421" /></a></p>
<p>turning the lights off and adding some labels we get:</p>
<p><a href="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-28-at-12-04-27.png"><img class="alignnone size-full wp-image-446" src="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-28-at-12-04-27.png?w=595&#038;h=426" alt="Screen Shot 2014-03-28 at 12.04.27" width="595" height="426" /></a></p><br />  <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gocomments/johngoodwin225.wordpress.com/438/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/johngoodwin225.wordpress.com/438/" /></a> <img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=438&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></content:encoded>
	</item>
<item rdf:about="http://johngoodwin225.wordpress.com/2014/03/26/all-roads-lead-to-experiments-with-gephi-linked-data-and-wikipedia/">
	<title>All roads lead to? Experiments with Gephi, Linked Data and Wikipedia</title>
	<link>http://johngoodwin225.wordpress.com/2014/03/26/all-roads-lead-to-experiments-with-gephi-linked-data-and-wikipedia/</link>
	<dc:date>2014-03-26T16:24:18Z</dc:date>
	<dc:creator><![CDATA[John Goodwin]]></dc:creator>
			<dc:subject><![CDATA[linked data]]></dc:subject>
		<dc:subject><![CDATA[dbpedia]]></dc:subject>
		<dc:subject><![CDATA[gephi]]></dc:subject>
		<dc:subject><![CDATA[wikipedia]]></dc:subject>
	<description><![CDATA[Gephi is &#8220;an interactive visualization and exploration platform for all kinds of networks and complex systems, dynamic and hierarchical graphs&#8221;. Tony Hirst did a great blog post a while back showing how you could use Gephi together with DBpedia (a linked data version of Wikipedia) to map an influence network in the world of philosophy. [&#8230;]<img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=426&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></description>
	<content:encoded><![CDATA[<p><a href="http://gephi.org/">Gephi</a> is &#8220;an interactive visualization and exploration <a href="http://gephi.org/features/">platform</a> for all kinds of networks and complex systems, dynamic and hierarchical graphs&#8221;. <a href="https://twitter.com/psychemedia">Tony Hirst</a> did a great <a href="http://blog.ouseful.info/2012/07/03/visualising-related-entries-in-wikipedia-using-gephi/">blog post</a> a while back showing how you could use Gephi together with <a href="http://dbpedia.org/About">DBpedia</a> (a <a href="http://linkeddata.org/">linked data</a> version of <a href="http://en.wikipedia.org/wiki/Main_Page">Wikipedia</a>) to map an influence network in the world of philosophy. Gephi offers a semantic web plugin which allows you to work with the web of linked data. I recommend you read Tony&#8217;s blog to get started with using that plugin with Gephi. I was interested to experiment with this plugin, and to look at what sort of geospatial visualisations could be possible.</p>
<p>If you want to follow all the steps in this post you will need to:</p>
<ul>
<li><a href="http://gephi.org/users/download/">Install Gephi</a></li>
<li><a href="http://gephi.org/tag/geolayout/">Install the geolayout plugin</a></li>
<li><a href="https://marketplace.gephi.org/plugin/recast-column/">Install the &#8216;recast column plugin&#8217;</a></li>
<li><a href="http://wiki.gephi.org/index.php/SemanticWebImport">Install the semantic web plugin</a></li>
<li><a href="http://blog.ouseful.info/2012/07/03/visualising-related-entries-in-wikipedia-using-gephi/">Read Tony&#8217;s blog</a></li>
</ul>
<p>Initially I was interested to see if there were any interesting networks we might visualise between places. In order to see how Wikipedia relates one place to another was a simple case of going to the <a href="http://dbpedia.org/sparql">DBpedia SPARQL endpoint</a> and trying the following query:</p>
<p><strong>select distinct ?p</strong><br />
<strong>where</strong><br />
<strong>{</strong><br />
<strong>?s a &lt;<a href="http://schema.org/Place">http://schema.org/Place</a>&gt; .</strong><br />
<strong>?o a &lt;<a href="http://schema.org/Place">http://schema.org/Place</a>&gt; .</strong><br />
<strong>?s ?p ?o .</strong><br />
<strong>}</strong></p>
<p>- where s and o are places, find me what &#8216;p&#8217; relates them. I noticed two properties &#8216;<a href="http://dbpedia.org/ontology/routeStart">http://dbpedia.org/ontology/routeStart</a>&#8216; and &#8216;<a href="http://dbpedia.org/ontology/routeEnd">http://dbpedia.org/ontology/routeEnd</a>&#8216; so I thought I would try to visualise how places round the world were linked by transport connections.Â  To find places connected by a transport link you want to find pairs &#8216;start&#8217; and &#8216;end&#8217; that are the route start and route end, respectively, of some transport link. You can do this with the following query:</p>
<p><strong>select ?start ?end</strong><br />
<strong>where</strong><br />
<strong>{</strong><br />
<strong>?start a &lt;<a href="http://schema.org/Place">http://schema.org/Place</a>&gt; .</strong><br />
<strong>?end a &lt;<a href="http://schema.org/Place">http://schema.org/Place</a>&gt; .</strong><br />
<strong>?link &lt;<a href="http://dbpedia.org/ontology/routeStart">http://dbpedia.org/ontology/routeStart</a>&gt; ?start .</strong><br />
<strong>?link &lt;<a href="http://dbpedia.org/ontology/routeEnd">http://dbpedia.org/ontology/routeEnd</a>&gt; ?end .</strong><br />
<strong>}</strong></p>
<p>This gives a lot of data so I thought I would restrict the links to be only road links:</p>
<p><strong>select ?start ?end</strong><br />
<strong>where</strong><br />
<strong>{</strong><strong><strong>?start a &lt;<a href="http://schema.org/Place">http://schema.org/Place</a>&gt; .</strong><br />
<strong>?end a &lt;<a href="http://schema.org/Place">http://schema.org/Place</a>&gt; .</strong><br />
<strong>?link &lt;<a href="http://dbpedia.org/ontology/routeStart">http://dbpedia.org/ontology/routeStart</a>&gt; ?start .</strong><br />
<strong>?link &lt;<a href="http://dbpedia.org/ontology/routeEnd">http://dbpedia.org/ontology/routeEnd</a>&gt; ?end .</strong><br />
?link a &lt;<a href="http://dbpedia.org/ontology/Road">http://dbpedia.org/ontology/Road</a>&gt; . }<br />
</strong></p>
<p>We are now ready to visualise this transport network in Gephi. Follow the steps in <a href="http://blog.ouseful.info/2012/07/03/visualising-related-entries-in-wikipedia-using-gephi/">Tony&#8217;s blog</a> to bring up the Semantic Web Importer. In the &#8216;driver&#8217; tab make sure &#8216;Remote &#8211; SOAP endpoint&#8217; is selected, and the EndPoint URL is <a href="http://dbpedia.org/sparql">http://dbpedia.org/sparql</a>. In an analogous way to Tony&#8217;s blog we need to construct our graph so we can visualise it. To simply view the connections between places it would be enough to just add this query to the &#8216;Query&#8217; tab:</p>
<p><strong> construct {?start &lt;<a href="http://foo.com/connectedTo">http://foo.com/connectedTo</a>&gt; ?end}</strong><br />
<strong>where</strong><br />
<strong>{</strong><br />
<strong>?start a &lt;<a href="http://schema.org/Place">http://schema.org/Place</a>&gt; .</strong><br />
<strong>?end a &lt;<a href="http://schema.org/Place">http://schema.org/Place</a>&gt; .</strong><br />
<strong>?link &lt;<a href="http://dbpedia.org/ontology/routeStart">http://dbpedia.org/ontology/routeStart</a>&gt; ?start .</strong><br />
<strong>?link &lt;<a href="http://dbpedia.org/ontology/routeEnd">http://dbpedia.org/ontology/routeEnd</a>&gt; ?end .</strong><br />
<strong>?link a &lt;<a href="http://dbpedia.org/ontology/Road">http://dbpedia.org/ontology/Road</a>&gt; .</strong><br />
<strong>}</strong></p>
<p>However, as we want to visualise this in a geospatial context we need the lat and long of the start and end points so our construct query becomes a bit more complicated:</p>
<p><strong>prefix gephi:&lt;<a href="http://gephi.org/">http://gephi.org/</a>&gt;</strong><br />
<strong>construct {</strong><br />
<strong>?start gephi:label ?labelstart .</strong><br />
<strong>?end gephi:label ?labelend .</strong><br />
<strong>?<strong>start</strong> gephi:lat ?minlat .</strong><br />
<strong>?<strong>start</strong> gephi:long ?minlong .</strong><br />
<strong>?<strong>end</strong> gephi:lat ?minlat2 .</strong><br />
<strong>?<strong>end</strong> gephi:long ?minlong2 .</strong><br />
<strong>?<strong>start</strong> &lt;<a href="http://foo.com/connectedTo">http://foo.com/connectedTo</a>&gt; ?<strong>end</strong>}</strong><br />
<strong>where</strong><br />
<strong>{</strong><br />
<strong>?<strong>start</strong> a &lt;<a href="http://schema.org/Place">http://schema.org/Place</a>&gt; .</strong><br />
<strong>?<strong>end</strong> a &lt;<a href="http://schema.org/Place">http://schema.org/Place</a>&gt; .</strong><br />
<strong>?link &lt;<a href="http://dbpedia.org/ontology/routeStart">http://dbpedia.org/ontology/routeStart</a>&gt; ?start .</strong><br />
<strong>?link &lt;<a href="http://dbpedia.org/ontology/routeEnd">http://dbpedia.org/ontology/routeEnd</a>&gt; ?<strong>end</strong> .</strong><br />
<strong>?link a &lt;<a href="http://dbpedia.org/ontology/Road">http://dbpedia.org/ontology/Road</a>&gt; .</strong><br />
<strong>{select ?<strong>start</strong> (MIN(?lat) AS ?minlat) (MIN(?long) AS ?minlong) where {?<strong>start</strong> &lt;<a href="http://www.w3.org/2003/01/geo/wgs84_pos#lat">http://www.w3.org/2003/01/geo/wgs84_pos#lat</a>&gt; ?lat . ?<strong>start</strong> &lt;<a href="http://www.w3.org/2003/01/geo/wgs84_pos#long">http://www.w3.org/2003/01/geo/wgs84_pos#long</a>&gt; ?long .} }</strong><br />
<strong>{select ?<strong>end</strong> (MIN(?lat2) AS ?minlat2) (MIN(?long2) AS ?minlong2) where {?<strong>end</strong> &lt;<a href="http://www.w3.org/2003/01/geo/wgs84_pos#lat">http://www.w3.org/2003/01/geo/wgs84_pos#lat</a>&gt; ?lat2 . ?<strong>end</strong> &lt;<a href="http://www.w3.org/2003/01/geo/wgs84_pos#long">http://www.w3.org/2003/01/geo/wgs84_pos#long</a>&gt; ?long2 .} }</strong><br />
<strong>?<strong>start</strong> &lt;<a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a>&gt; ?labelstart .</strong><br />
<strong>?<strong>end</strong> &lt;<a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a>&gt; ?labelend .</strong><br />
<strong>FILTER (lang(?labelstart) = &#8216;en&#8217;)</strong><br />
<strong>FILTER (lang(?labelend) = &#8216;en&#8217;)</strong><br />
<strong>}</strong></p>
<p>Note that query for the lat and long is a bit more complicated that it might be. This is because DBpedia data is quite messy, and many entities will have more than one lat/long pair. I used a <a href="http://www.w3.org/TR/sparql11-query/#subqueries">subquery</a> in SPARQL to pull out the minimum lat/long for all the pairs retrieved. Additionally I also retrieved the English labels for each of the start/end points.</p>
<p>Now copy/paste this construct query into the &#8216;Query&#8217; tab on the Semantic Web Importer:</p>
<p><a href="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-26-at-15-54-34.png"><img class="alignnone size-full wp-image-428" src="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-26-at-15-54-34.png?w=595&#038;h=574" alt="Screen Shot 2014-03-26 at 15.54.34" width="595" height="574" /></a></p>
<p>Now hit the run button and watch the data load.</p>
<p>To visual the data we need to do a bit more work. In Gephi click on the &#8216;Data Laboratory&#8217; and you should now see your data table. Unfortunately all of the lats and longs have been imported as strings and we need to recast them as decimals. To do this click on the &#8216;More actions&#8217; pull down menu and look for &#8216;Recast column&#8217; and click it. In the &#8216;Recast manipulator&#8217; window go to &#8216;column&#8217; and select &#8216;lat(Node Table)&#8217; from the pull down menu. Under &#8216;Convert to&#8217; select &#8216;Double&#8217; and click recast. Do the same for &#8216;long&#8217;.</p>
<p><a href="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-26-at-16-01-19.png"><img class="alignnone size-full wp-image-429" src="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-26-at-16-01-19.png?w=595" alt="Screen Shot 2014-03-26 at 16.01.19"   /></a></p>
<p>when you are done click &#8216;ok&#8217; and return to the &#8216;overview&#8217; tab in Gephi. To see this data geospatially go to the layout panel and select &#8216;Geo Layout&#8217;. Change the latitude and longitude to your new recast variable names, and unclick &#8216;center&#8217; (my graph kept vanishing with it selected). Experiment with the scale value:</p>
<p><a href="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-26-at-16-09-49.png"><img class="alignnone size-full wp-image-430" src="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-26-at-16-09-49.png?w=595" alt="Screen Shot 2014-03-26 at 16.09.49"   /></a></p>
<p>You should now see something like this:</p>
<p><a href="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-26-at-16-11-13.png"><img class="alignnone size-full wp-image-431" src="http://johngoodwin225.files.wordpress.com/2014/03/screen-shot-2014-03-26-at-16-11-13.png?w=595&#038;h=343" alt="Screen Shot 2014-03-26 at 16.11.13" width="595" height="343" /></a></p>
<p>in your display panel (click image to view in higher resolution).</p>
<p>Given that this is supposed to be a road network you will find some oddities. This it seems to down to &#8216;European routes&#8217; like <a href="http://en.wikipedia.org/wiki/European_route_E15"><span dir="auto">European route E15</span></a> that link from Scotland down to Spain.</p><br />  <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gocomments/johngoodwin225.wordpress.com/426/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/johngoodwin225.wordpress.com/426/" /></a> <img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=426&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></content:encoded>
	</item>
<item rdf:about="http://johngoodwin225.wordpress.com/2014/03/25/first-signs-for-me-of-linked-data-being-properly-linked/">
	<title>First Signs (For Me) of Linked Data Being Properly Linked&#8230;?!</title>
	<link>http://johngoodwin225.wordpress.com/2014/03/25/first-signs-for-me-of-linked-data-being-properly-linked/</link>
	<dc:date>2014-03-25T15:41:10Z</dc:date>
	<dc:creator><![CDATA[John Goodwin]]></dc:creator>
			<dc:subject><![CDATA[Uncategorized]]></dc:subject>
	<description><![CDATA[Originally posted on <a href="http://blog.ouseful.info/2014/03/25/first-signs-for-me-of-linked-data-being-properly-linked/">OUseful.Info, the blog...</a>:<br />As anyone who&#8217;s followed this blog for some time will know, my relationship with Linked Data has been an off and on again one over the years. At the current time, it&#8217;s largely off &#8211; all my OpenRefine installs seem to have given up the ghost as far&#8230;<img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=425&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></description>
	<content:encoded><![CDATA[<div class="wpcom-reblog-snapshot"><div class="reblogger-note"><p class="reblogger-headline"><img alt='' src='http://0.gravatar.com/avatar/64269fa8ed6ba1f7cb08133b32e56eda?s=32&#038;d=identicon&#038;r=G' class='avatar avatar-32' height='32' width='32' /><a href="http://johngoodwin225.wordpress.com/author/john225/">John Goodwin</a>:</p><div class='reblogger-note-content'><blockquote><p>Tony Hirst blogs about two of my recent blogs&#8230;</p>
</blockquote></div></div><div class="reblog-post"><p class="reblog-from"><img alt='' src='http://1.gravatar.com/avatar/abbd9f90565ce9ae4d065d93a81d8c03?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' />Originally posted on <a href="http://blog.ouseful.info/2014/03/25/first-signs-for-me-of-linked-data-being-properly-linked/">OUseful.Info, the blog...</a>:</p><div class="reblogged-content">
As anyone whoâs followed this blog for some time will know, my relationship with Linked Data has been an off and on again one over the years. At the current time, itâs largely off â all my OpenRefine installs seem to have given up the ghost as far as reconciliation and linking services go, and I have no idea where the problem lies (whether with the plugins, the installs, with Java, with the endpoints, with the reconciliations or linkages Iâm trying to establish).


<p>My dabblings with pulling data in from Wikipedia/DBpedia to Gephi (eg as described in <a href="http://blog.ouseful.info/2012/07/03/visualising-related-entries-in-wikipedia-using-gephi/">Visualising Related Entries in Wikipedia Using Gephi</a> and the various associated follow-on posts) continue to be hit and miss due to the vagaries of DBpedia and the huge gaps in infobox structured data across Wikipedia itself.</p>

<p>With OpenRefine not doing its thing for me, I havenât been able to use that app asâ¦</p>
</div><p class="reblog-source"><a href="http://blog.ouseful.info/2014/03/25/first-signs-for-me-of-linked-data-being-properly-linked/">View original</a> <span class="more-words">453 more words</span></p></div></div><br />  <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gocomments/johngoodwin225.wordpress.com/425/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/johngoodwin225.wordpress.com/425/" /></a> <img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=425&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></content:encoded>
	</item>
<item rdf:about="http://johngoodwin225.wordpress.com/2014/03/23/tell-me-about-hamsphire-linking-government-data-using-sparql-federation-2/">
	<title>Tell Me About Hampshire &#8211; Linking Government Data using SPARQL federation 2</title>
	<link>http://johngoodwin225.wordpress.com/2014/03/23/tell-me-about-hamsphire-linking-government-data-using-sparql-federation-2/</link>
	<dc:date>2014-03-23T11:39:14Z</dc:date>
	<dc:creator><![CDATA[John Goodwin]]></dc:creator>
			<dc:subject><![CDATA[linked data]]></dc:subject>
		<dc:subject><![CDATA[Semantic Web]]></dc:subject>
		<dc:subject><![CDATA[open data]]></dc:subject>
	<description><![CDATA[Yesterday I blogged about how to do some SPARQL federated queries across various government websites, and this blog is a continuation of this with a different example. In this blog I give an example query which basically say &#8216;tell me stuff about Hampshire&#8216;. I do this by linking up data from Ordnance Survey, the Office [&#8230;]<img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=421&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></description>
	<content:encoded><![CDATA[<p><a href="http://johngoodwin225.wordpress.com/2014/03/22/federating-sparql-queries-across-government-linked-data/">Yesterday I blogged </a>about how to do some SPARQL federated queries across various government websites, and this blog is a continuation of this with a different example. In this blog I give an example query which basically say &#8216;tell me stuff about <a href="http://data.ordnancesurvey.co.uk/id/7000000000017765">Hampshire</a>&#8216;. I do this by linking up data from <a href="http://data.ordnancesurvey.co.uk">Ordnance Survey</a>, the <a href="http://statistics.data.gov.uk">Office of National Statistics</a>, the <a href="http://opendatacommunities.org">Department of Communities and Local Government</a> and <a href="http://linkeddata.hants.gov.uk">Hampshire County Council</a>. This query is really just for illustrative purposes, but I want to ask &#8216;for all districts in Hampshire find me the index of multiple deprivation rank, the change order and operative date for that district, the website for the local authority of that district along with the <a href="http://linkeddata.hants.gov.uk/datasets/land-supply/land-supply-site">addresses of parcels of land where it is planned to build new dwellings</a>. To achieve this I need to take data from several sources and use SPARQL federation. Here is the query that answers my question. First I query Ordnance Survey linked data to find districts in Hampshire, and I then pass these districts to three other linked data services to retrieve the relevant information. To try this example head over to the <a href="http://data.ordnancesurvey.co.uk/datasets/boundary-line/explorer/sparql">Ordnance Survey SPARQL endpoint</a> and copy/paste the following:</p>
<p><strong>select ?districtname ?imdrank ?changeorder ?opdate ?councilwebsite ?siteaddress</strong><br />
<strong>where</strong><br />
<strong>{?district &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/within">http://data.ordnancesurvey.co.uk/ontology/spatialrelations/within</a>&gt; </strong><br />
<strong>Â Â  &lt;<a href="http://data.ordnancesurvey.co.uk/id/7000000000017765">http://data.ordnancesurvey.co.uk/id/7000000000017765</a>&gt; .</strong><br />
<strong>Â  ?district a &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/admingeo/District">http://data.ordnancesurvey.co.uk/ontology/admingeo/District</a>&gt; .</strong><br />
<strong>Â  ?district &lt;<a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a>&gt; ?districtname .</strong><br />
<strong>Â SERVICE &lt;<a href="http://opendatacommunities.org/sparql">http://opendatacommunities.org/sparql</a>&gt; {</strong><br />
<strong>Â ?s &lt;<a href="http://purl.org/linked-data/sdmx/2009/dimension#refArea">http://purl.org/linked-data/sdmx/2009/dimension#refArea</a>&gt; ?district .</strong><br />
<strong>?s &lt;<a href="http://opendatacommunities.org/def/IMD#IMD-rank">http://opendatacommunities.org/def/IMD#IMD-rank</a>&gt; ?imdrank . </strong><br />
<strong>Â ?authority &lt;<a href="http://opendatacommunities.org/def/local-government/governs">http://opendatacommunities.org/def/local-government/governs</a>&gt; ?district .</strong><br />
<strong>Â ?authority &lt;<a href="http://xmlns.com/foaf/0.1/page">http://xmlns.com/foaf/0.1/page</a>&gt; ?councilwebsite .</strong><br />
<strong>Â }</strong><br />
<strong>Â ?district &lt;<a href="http://www.w3.org/2002/07/owl#sameAs">http://www.w3.org/2002/07/owl#sameAs</a>&gt; ?onsdist .</strong><br />
<strong>Â SERVICE &lt;<a href="http://statistics.data.gov.uk/sparql">http://statistics.data.gov.uk/sparql</a>&gt; {</strong><br />
<strong>Â ?onsdist &lt;<a href="http://statistics.data.gov.uk/def/boundary-change/originatingChangeOrder">http://statistics.data.gov.uk/def/boundary-change/originatingChangeOrder</a>&gt; </strong><br />
<strong>Â Â Â Â Â Â Â Â Â  ?changeorder .</strong><br />
<strong>Â ?onsdist &lt;<a href="http://statistics.data.gov.uk/def/boundary-change/operativedate">http://statistics.data.gov.uk/def/boundary-change/operativedate</a>&gt;</strong><br />
<strong>Â Â Â Â Â Â Â Â Â  ?opdate .</strong><br />
<strong>Â }</strong><br />
<strong>Â SERVICE &lt;<a href="http://linkeddata.hants.gov.uk/sparql">http://linkeddata.hants.gov.uk/sparql</a>&gt; {</strong><br />
<strong>Â Â  ?landsupsite &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/admingeo/district">http://data.ordnancesurvey.co.uk/ontology/admingeo/district</a>&gt; ?district .</strong><br />
<strong>Â Â  ?landsupsite a &lt;<a href="http://linkeddata.hants.gov.uk/def/land-supply/LandSupplySite">http://linkeddata.hants.gov.uk/def/land-supply/LandSupplySite</a>&gt; .</strong><br />
<strong>Â Â  ?landsupsite </strong><br />
<strong>&lt;<a href="http://www.ordnancesurvey.co.uk/ontology/BuildingsAndPlaces/v1.1/BuildingsAndPlaces.owl#hasAddress">http://www.ordnancesurvey.co.uk/ontology/BuildingsAndPlaces/v1.1/BuildingsAndPlaces.owl#hasAddress</a>&gt;</strong><br />
<strong>Â Â  ?siteaddress .</strong><br />
<strong>Â Â  }</strong><br />
<strong>}</strong></p>
<p>Happy SPARQLing&#8230;</p><br />  <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gocomments/johngoodwin225.wordpress.com/421/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/johngoodwin225.wordpress.com/421/" /></a> <img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=421&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></content:encoded>
	</item>
<item rdf:about="http://johngoodwin225.wordpress.com/2014/03/22/federating-sparql-queries-across-government-linked-data/">
	<title>Federating SPARQL Queries Across Government Linked Data</title>
	<link>http://johngoodwin225.wordpress.com/2014/03/22/federating-sparql-queries-across-government-linked-data/</link>
	<dc:date>2014-03-22T17:51:58Z</dc:date>
	<dc:creator><![CDATA[John Goodwin]]></dc:creator>
			<dc:subject><![CDATA[linked data]]></dc:subject>
		<dc:subject><![CDATA[Semantic Web]]></dc:subject>
	<description><![CDATA[SPARQL 1.1 introduces the idea of federated SPARQL queries &#8211; this enables you to execute part of your SPARQL query against a remote SPARQL endpoint. I thought I&#8217;d provide some examples of using this feature in government linked open data. The Environment Agency has published a number of its open data offerings as linked data [&#8230;]<img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=411&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></description>
	<content:encoded><![CDATA[<p>SPARQL 1.1 introduces the idea of federated SPARQL queries &#8211; this enables you to execute part of your SPARQL query against a remote SPARQL endpoint. I thought I&#8217;d provide some examples of using this feature in government linked open data.</p>
<p>The <a href="http://www.environment-agency.gov.uk/">Environment Agency</a> has published a number of its open data offerings as linked data which you can explore <a href="http://environment.data.gov.uk/">here</a>. One of these datasets is the <a href="http://environment.data.gov.uk/bwq">Bathing Water Quality Data</a>, and you can explore this via their <a href="http://environment.data.gov.uk/bwq/sparql.html">SPARQL endpoint</a>. I won&#8217;t go into this data in too much detail as it is not my area of expertise. The Environment Agency has created <a href="http://5stardata.info/">5-star open data</a> by linking their data to both <a href="http://data.ordnancesurvey.co.uk">Ordnance Survey</a> and <a href="http://statistics.data.gov.uk">Office of National Statistics</a> linked data. Look at linked data for the <a href="http://environment.data.gov.uk/id/bathing-water/ukj3307-16300">Eastoke</a> bathing water site and you&#8217;ll see it linked to <a href="http://data.ordnancesurvey.co.uk/id/7000000000017297">Havant</a> and <a href="http://data.ordnancesurvey.co.uk/id/7000000000017765">Hampshire</a> in the Ordnance Survey data. A relatively straight forward SPARQL query will get youÂ  a list of bathing waters, their name and the district they are in:</p>
<p><strong>select ?x ?name ?district</strong><br />
<strong>where {</strong><br />
<strong>?x a &lt;<a href="http://environment.data.gov.uk/def/bathing-water/BathingWater">http://environment.data.gov.uk/def/bathing-water/BathingWater</a>&gt; .</strong><br />
<strong>?x &lt;<a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a>&gt; ?name .</strong><br />
<strong>?x &lt;<a href="http://www.w3.org/2000/01/rdf-schema#label">http://statistics.data.gov.uk/def/administrative-geography/district</a>&gt; ?district .}</strong></p>
<p>Now suppose we just want a list of bathing water areas in <a href="http://data.ordnancesurvey.co.uk/id/7000000000041421">South East</a> England &#8211; how would we do that? This is where <a href="http://www.w3.org/TR/sparql11-federated-query/">SPARQL federation</a> comes in. The information about which European Regions districts are in is held in the Ordnance Survey linked data. If you hop over the the <a href="http://data.ordnancesurvey.co.uk/datasets/boundary-line/explorer/sparql">Ordnance Survey</a> SPARQL endpoint explorer you can run the following query to find all districts in South East England along with their names (please see a <a href="http://johngoodwin225.wordpress.com/2013/08/02/ordnance-survey-linked-data-a-simple-spatial-query/">previous blog post</a> for information about simple spatial queries):</p>
<p><strong>select ?district ?districtname</strong><br />
<strong>where</strong><br />
<strong>{?district &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/within">http://data.ordnancesurvey.co.uk/ontology/spatialrelations/within</a>&gt;+ </strong><br />
<strong>Â Â  &lt;<a href="http://data.ordnancesurvey.co.uk/id/7000000000041421">http://data.ordnancesurvey.co.uk/id/7000000000041421</a>&gt; .</strong><br />
<strong>Â  ?district &lt;<a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a>&gt; ?districtname .}</strong></p>
<p>Using the <a href="http://www.w3.org/TR/sparql11-federated-query/#simpleService">SERVICE</a> keyword we can bring these two queries together to find all bathing waters in South East England, and the districts they are in:</p>
<p><strong>select ?x ?name ?districtname </strong><br />
<strong>where {</strong><br />
<strong>?x a &lt;<a href="http://environment.data.gov.uk/def/bathing-water/BathingWater">http://environment.data.gov.uk/def/bathing-water/BathingWater</a>&gt; .</strong><br />
<strong>?x &lt;<a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a>&gt; ?name .</strong><br />
<strong>?x &lt;<a href="http://statistics.data.gov.uk/def/administrative-geography/district">http://statistics.data.gov.uk/def/administrative-geography/district</a>&gt; ?district .</strong><br />
<strong>SERVICE &lt;<a href="http://data.ordnancesurvey.co.uk/datasets/boundary-line/apis/sparql">http://data.ordnancesurvey.co.uk/datasets/boundary-line/apis/sparql</a>&gt;</strong><br />
<strong>{ ?district &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/within">http://data.ordnancesurvey.co.uk/ontology/spatialrelations/within</a>&gt;+ </strong><br />
<strong>Â Â  &lt;<a href="http://data.ordnancesurvey.co.uk/id/7000000000041421">http://data.ordnancesurvey.co.uk/id/7000000000041421</a>&gt; .</strong><br />
<strong>Â Â  ?district &lt;<a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a>&gt; ?districtname .}</strong><br />
<strong>}</strong><br />
<strong>order by ?districtname</strong></p>
<p>Now supposed we want to know the sediment types of the bathing waters in Havant. We can find this with the following query:</p>
<p><strong>select ?x ?name ?sediment</strong><br />
<strong>where {</strong><br />
<strong>?x a &lt;<a href="http://environment.data.gov.uk/def/bathing-water/BathingWater">http://environment.data.gov.uk/def/bathing-water/BathingWater</a>&gt; .</strong><br />
<strong>?x &lt;<a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a>&gt; ?name .</strong><br />
<strong>?x &lt;<a href="http://statistics.data.gov.uk/def/administrative-geography/district">http://statistics.data.gov.uk/def/administrative-geography/district</a>&gt; &lt;<a href="http://data.ordnancesurvey.co.uk/id/7000000000017297">http://data.ordnancesurvey.co.uk/id/7000000000017297</a>&gt; .</strong><br />
<strong>?x &lt;<a href="http://environment.data.gov.uk/def/bathing-water/sedimentTypesPresent">http://environment.data.gov.uk/def/bathing-water/sedimentTypesPresent</a>&gt; ?sediment .</strong><br />
<strong>}</strong></p>
<p>We can again use the SPARQL federation to do something more interesting. The follow query returns both sediment types in bathing waters in Havant together with sediment types of bathing water in regions that touch Havant:</p>
<p><strong>select ?x ?name ?sediment</strong><br />
<strong>where {</strong><br />
<strong>{</strong><br />
<strong>?x a &lt;<a href="http://environment.data.gov.uk/def/bathing-water/BathingWater">http://environment.data.gov.uk/def/bathing-water/BathingWater</a>&gt; .</strong><br />
<strong>?x &lt;<a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a>&gt; ?name .</strong><br />
<strong>?x &lt;<a href="http://statistics.data.gov.uk/def/administrative-geography/district">http://statistics.data.gov.uk/def/administrative-geography/district</a>&gt; &lt;<a href="http://data.ordnancesurvey.co.uk/id/7000000000017297">http://data.ordnancesurvey.co.uk/id/7000000000017297</a>&gt; .</strong><br />
<strong>?x &lt;<a href="http://environment.data.gov.uk/def/bathing-water/sedimentTypesPresent">http://environment.data.gov.uk/def/bathing-water/sedimentTypesPresent</a>&gt; ?sediment .</strong><br />
<strong>}</strong><br />
<strong>UNION</strong><br />
<strong>{</strong><br />
<strong>SERVICE &lt;<a href="http://data.ordnancesurvey.co.uk/datasets/boundary-line/apis/sparql">http://data.ordnancesurvey.co.uk/datasets/boundary-line/apis/sparql</a>&gt;</strong><br />
<strong>{ ?district &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches">http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches</a>&gt; </strong><br />
<strong>Â Â  &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches">http://data.ordnancesurvey.co.uk/id/7000000000017297</a>&gt; .</strong><br />
<strong>}</strong><br />
<strong>?x a &lt;<a href="http://environment.data.gov.uk/def/bathing-water/BathingWater">http://environment.data.gov.uk/def/bathing-water/BathingWater</a>&gt; .</strong><br />
<strong>?x &lt;<a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a>&gt; ?name .</strong><br />
<strong>?x &lt;<a href="http://statistics.data.gov.uk/def/administrative-geography/district">http://statistics.data.gov.uk/def/administrative-geography/district</a>&gt; ?district .</strong><br />
<strong>?x &lt;<a href="http://environment.data.gov.uk/def/bathing-water/sedimentTypesPresent">http://environment.data.gov.uk/def/bathing-water/sedimentTypesPresent</a>&gt; ?sediment .</strong><br />
<strong>}</strong><br />
<strong>}</strong></p>
<p>Another great government open data resource is the <a href="http://opendatacommunities.org/">Open Data Communities site</a>. They have a SPARQL endpoint <a href="http://opendatacommunities.org/sparql">here</a>. This federated SPARQL query (analogous to those above) can be used, for example, to find the Index of Multiple Deprivation Environment rank for Havant and surrounding districts. This works are follows:</p>
<p><strong></strong><strong>select ?s ?imdrank<br />
where<br />
{<br />
{<br />
?s &lt;<a href="http://purl.org/linked-data/sdmx/2009/dimension#refArea">http://purl.org/linked-data/sdmx/2009/dimension#refArea</a>&gt; &lt;<a href="http://data.ordnancesurvey.co.uk/id/7000000000017297">http://data.ordnancesurvey.co.uk/id/7000000000017297</a>&gt; .<br />
?s &lt;<a href="http://opendatacommunities.org/def/IMD#IMD-environment-rank">http://opendatacommunities.org/def/IMD#IMD-environment-rank</a>&gt; ?imdrank .<br />
}<br />
UNION<br />
{<br />
SERVICE &lt;<a href="http://data.ordnancesurvey.co.uk/datasets/boundary-line/apis/sparql">http://data.ordnancesurvey.co.uk/datasets/boundary-line/apis/sparql</a>&gt;<br />
{ ?district &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches">http://data.ordnancesurvey.co.uk/ontology/spatialrelations/touches</a>&gt;<br />
&lt;<a href="http://data.ordnancesurvey.co.uk/id/7000000000017297">http://data.ordnancesurvey.co.uk/id/7000000000017297</a>&gt; .<br />
}<br />
?s &lt;<a href="http://purl.org/linked-data/sdmx/2009/dimension#refArea">http://purl.org/linked-data/sdmx/2009/dimension#refArea</a>&gt; ?district .<br />
?s &lt;<a href="http://opendatacommunities.org/def/IMD#IMD-environment-rank">http://opendatacommunities.org/def/IMD#IMD-environment-rank</a>&gt; ?imdrank .<br />
}<br />
}<br />
</strong></p>
<p>I will now leave it as an exercise to the reader to figure out how these all combine so you can ask for &#8216;all bathing waters in Havant and surrounding areas, and the IMD environment ranks of the areas containing those bathing waters&#8217; &#8211; it is possible!</p>
<p>Please note that federated SPARQL can be slow&#8230;happy SPARQLing.</p><br />  <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gocomments/johngoodwin225.wordpress.com/411/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/johngoodwin225.wordpress.com/411/" /></a> <img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=411&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></content:encoded>
	</item>
<item rdf:about="http://johngoodwin225.wordpress.com/2013/09/24/ordnance-survey-linked-data-the-search-api/">
	<title>Ordnance Survey Linked Data: The Search API</title>
	<link>http://johngoodwin225.wordpress.com/2013/09/24/ordnance-survey-linked-data-the-search-api/</link>
	<dc:date>2013-09-24T14:32:24Z</dc:date>
	<dc:creator><![CDATA[John Goodwin]]></dc:creator>
			<dc:subject><![CDATA[linked data]]></dc:subject>
		<dc:subject><![CDATA[Semantic Web]]></dc:subject>
		<dc:subject><![CDATA[open search]]></dc:subject>
		<dc:subject><![CDATA[Ordnance Survey]]></dc:subject>
	<description><![CDATA[Please note in some of the examples below I have been having trouble with wordpress &#8216;correcting&#8217; quote marks in my text. If you find the queries don&#8217;t work you may need to manually replace the copied quote marks from below with new ones via your keyboard. Hope that makes sense. One of the biggest improvements [&#8230;]<img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=392&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></description>
	<content:encoded><![CDATA[<p><em>Please note in some of the examples below I have been having trouble with wordpress &#8216;correcting&#8217; quote marks in my text. If you find the queries don&#8217;t work you may need to manually replace the copied quote marks from below with new ones via your keyboard. Hope that makes sense.</em></p>
<p>One of the biggest improvements to the new <a href="http://data.ordnancesurvey.co.uk/">Ordnance Survey Linked Data site</a> is the much improved search functionality. You can either search over a specific dataset (e.g. the <a href="http://data.ordnancesurvey.co.uk/datasets/code-point-open">Code-Point(R) Open linked data</a>) or over all the combined datasets. I will first give some examples of using the Boundary-Line(TM) search API.</p>
<p>The Boundary-Line search API explorer can be found <a href="http://data.ordnancesurvey.co.uk/datasets/boundary-line/explorer/search">here</a>. The simplest use of this search API is to enter some text for the name of an administrative area or the <a href="http://data.ordnancesurvey.co.uk/ontology/admingeo/gssCode">GSS code</a> (the ONS identifier for a statistical region) into the search box. To get started enter <em>Southampton</em> into the query box. You will see that the search results are returned in JSON (RSS and Atom are additional options). Results contain the URI of the entities that match your queries along with a number of useful attributes.</p>
<p>Note that the Request box shows the actual GET request that is being done, and you can use this GET request in your applications. Now try searching for a GSS code, enter <em>E06000045 </em>into the query box. You should see results for the <a href="http://data.ordnancesurvey.co.uk/id/7000000000037256">City of Southampton</a> returned. So far so straight forward. The search function also allows for wildcards in search, for example in the Query box type:</p>
<p><strong>label:Southa*</strong></p>
<p>It is also possible to narrow search results by type. Recall that the search for Southampton returned both Westminster constituencies and a unitary authority with Southampton in their name. To just find the Westminster constituencies search for the following:</p>
<p><strong>label:Southampton AND type:&#8221;<a href="http://data.ordnancesurvey.co.uk/ontology/admingeo/WestminsterConstituency" rel="nofollow">http://data.ordnancesurvey.co.uk/ontology/admingeo/WestminsterConstituency</a><strong><strong><strong><strong>&#8220;</strong></strong></strong></strong></strong></p>
<p>The search API also allows you to perform a number of simple spatial queries. The first of these are bounding box queries. For the Boundary-Line data you can specify a bounding box, and find all the administrative regions whose centroids lie within that bounding box. The bounding box can be expressed in eastings and northings. For example try the following:</p>
<p><strong>easting:[371000 TO 374000] AND northing:[161000 TO 164500]</strong></p>
<p>in the query box.</p>
<p>The answers can be narrowed down further by specifying the type of object that should be returned. For example to just get the civil parishes in this bounding box try the following:</p>
<p><strong>easting:[371000 TO 374000] AND northing:[161000 TO 164500] <strong>AND type:&#8221;<a href="http://data.ordnancesurvey.co.uk/ontology/admingeo/CivilParish" rel="nofollow">http://data.ordnancesurvey.co.uk/ontology/admingeo/CivilParish</a><strong><strong><strong><strong>&#8220;</strong></strong></strong></strong></strong></strong></p>
<p>Another type of simple spatial query we can do in the search API is &#8216;find me all feature of a kind type within a certain radius of a given point&#8217;. Here the point can be specified in either lat/long or easting/northing. To find all of the civil parishes in a 50 km radius of the point with easting 442339 and northing 112882 put:</p>
<p><strong><strong>type:&#8221;<a href="http://data.ordnancesurvey.co.uk/ontology/admingeo/CivilParish" rel="nofollow">http://data.ordnancesurvey.co.uk/ontology/admingeo/CivilParish</a><strong><strong>&#8220;</strong></strong></strong></strong></p>
<p>into the query box and put the appropriate values in the easting and northing boxes, followed by a 50 in the radio search box. If, for example, you want to perform this query again but find civil parishes and districts enter the following into the query box:</p>
<p><strong>type:&#8221;<a href="http://data.ordnancesurvey.co.uk/ontology/admingeo/CivilParish" rel="nofollow">http://data.ordnancesurvey.co.uk/ontology/admingeo/CivilParish</a><strong><strong><strong><strong>&#8220;</strong></strong></strong></strong> OR type:&#8221;<a href="http://data.ordnancesurvey.co.uk/ontology/admingeo/District" rel="nofollow">http://data.ordnancesurvey.co.uk/ontology/admingeo/District</a><strong><strong><strong><strong>&#8220;</strong></strong></strong></strong></strong></p>
<p>and try the query again.</p>
<p>These are just some simple examples of the search API. The full documentation is <a href="http://data.ordnancesurvey.co.uk/docs/search">here</a>.</p><br />  <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gocomments/johngoodwin225.wordpress.com/392/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/johngoodwin225.wordpress.com/392/" /></a> <img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=392&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></content:encoded>
	</item>
<item rdf:about="http://johngoodwin225.wordpress.com/2013/09/06/ordnance-survey-names-gazetteer-illustrative-data/">
	<title>Ordnance Survey Names Gazetteer &#8211; Illustrative data</title>
	<link>http://johngoodwin225.wordpress.com/2013/09/06/ordnance-survey-names-gazetteer-illustrative-data/</link>
	<dc:date>2013-09-06T11:53:45Z</dc:date>
	<dc:creator><![CDATA[John Goodwin]]></dc:creator>
			<dc:subject><![CDATA[Uncategorized]]></dc:subject>
		<dc:subject><![CDATA[Ordnance Survey]]></dc:subject>
	<description><![CDATA[On behalf of my employer: The growth and development of new, web and mobile applications demands the development of new data to enable effective location searching. In response we have published illustrative data for an updated gazetteer of names. Weâd love it if you would take a look and provide us with your feedback. We [&#8230;]<img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=389&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></description>
	<content:encoded><![CDATA[<p>On behalf of my employer:</p>
<p>The growth and development of new, web and mobile applications demands the development of new data to enable effective location searching. In response we have published illustrative data for an updated gazetteer of names. Weâd love it if you would take a look and provide us with your feedback. We want to make sure that the new product meets your needs. Access the data through <a href="http://www.ordnancesurvey.co.uk/business-and-government/help-and-support/os-insight/index.html">OS Insight</a></p>
<p>There is also a linked data version of this data available via the above link. This contains RDF in n-triples format.</p>
<p>The data will be available for review until <b>Friday 4th October 2013.</b></p><br />  <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gocomments/johngoodwin225.wordpress.com/389/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/johngoodwin225.wordpress.com/389/" /></a> <img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=389&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></content:encoded>
	</item>
<item rdf:about="http://johngoodwin225.wordpress.com/2013/09/01/interview-in-odbms-org/">
	<title>Interview in ODBMS.org</title>
	<link>http://johngoodwin225.wordpress.com/2013/09/01/interview-in-odbms-org/</link>
	<dc:date>2013-09-01T15:55:31Z</dc:date>
	<dc:creator><![CDATA[John Goodwin]]></dc:creator>
			<dc:subject><![CDATA[linked data]]></dc:subject>
		<dc:subject><![CDATA[Semantic Web]]></dc:subject>
	<description><![CDATA[I did a recent interview with my friend Prof. Roberto V. Zicari over at odbms.org. You can read it here. (Please forgive the few typos that crept into some of my answers).<img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=386&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></description>
	<content:encoded><![CDATA[<p>I did a recent interview with my friend <a href="https://twitter.com/odbmsorg">Prof. Roberto V. Zicari</a> over at <a href="http://www.odbms.org/">odbms.org</a>. You can read it <a href="http://www.odbms.org/blog/2013/09/on-linked-data-interview-with-john-goodwin/">here</a>. (Please forgive the few typos that crept into some of my answers).</p><br />  <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gocomments/johngoodwin225.wordpress.com/386/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/johngoodwin225.wordpress.com/386/" /></a> <img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=386&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></content:encoded>
	</item>
<item rdf:about="http://johngoodwin225.wordpress.com/2013/08/26/experiments-with-schema-org/">
	<title>Experiments with schema.org</title>
	<link>http://johngoodwin225.wordpress.com/2013/08/26/experiments-with-schema-org/</link>
	<dc:date>2013-08-26T14:45:55Z</dc:date>
	<dc:creator><![CDATA[John Goodwin]]></dc:creator>
			<dc:subject><![CDATA[linked data]]></dc:subject>
		<dc:subject><![CDATA[Music and gigs]]></dc:subject>
		<dc:subject><![CDATA[Semantic Web]]></dc:subject>
		<dc:subject><![CDATA[new model army]]></dc:subject>
		<dc:subject><![CDATA[OS OpenSpace]]></dc:subject>
		<dc:subject><![CDATA[RDFa]]></dc:subject>
		<dc:subject><![CDATA[rich snippets]]></dc:subject>
		<dc:subject><![CDATA[schema.org]]></dc:subject>
	<description><![CDATA[Directly quoting from schema.org: This site provides a collection of schemas, i.e., html tags, that webmasters can use to markup their pages in ways recognized by major search providers. Search engines including Bing, Google, Yahoo! and Yandex rely on this markup to improve the display of search results, making it easier for people to find [&#8230;]<img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=381&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></description>
	<content:encoded><![CDATA[<p>Directly quoting from <a href="http://schema.org/">schema.org</a>:</p>
<blockquote><p>This site provides a collection of schemas, i.e., html tags, that webmasters can use to markup their pages in ways recognized by major search providers. Search engines including Bing, Google, Yahoo! and Yandex rely on this markup to improve the display of search results, making it easier for people to find the right web pages.</p>
<p>Many sites are generated from structured data, which is often stored in databases. When this data is formatted into HTML, it becomes very difficult to recover the original structured data. Many applications, especially search engines, can benefit greatly from direct access to this structured data. On-page markup enables search engines to understand the information on web pages and provide richer search results in order to make it easier for users to find relevant information on the web. Markup can also enable new tools and applications that make use of the structure.</p></blockquote>
<p>My favourite band, <a href="http://www.johngoodwin.me.uk/artist/newmodelarmy">New Model Army</a>, are touring later this year so I thought creating a website for their UK tour dates would be a good way to experiment with schema.org markup. First off we have a webpage for the UK leg of their winter tour:</p>
<p><a href="http://www.johngoodwin.me.uk/event/newmodelarmy-uk-wintertour-2013">http://www.johngoodwin.me.uk/event/newmodelarmy-uk-wintertour-2013</a></p>
<p>which is a kind of <a href="http://schema.org/MusicEvent">Music Event</a>, and this is related to a number of <a href="http://schema.org/subEvent">sub events</a> such as:</p>
<p><a href="http://www.johngoodwin.me.uk/event/newmodelarmy-uk-Aberdeen-20131112">http://www.johngoodwin.me.uk/event/newmodelarmy-uk-Aberdeen-20131112</a></p>
<p>which is also a kind of <a href="http://schema.org/MusicEvent">Music Event</a>. Each of these events are related to a <a href="http://schema.org/EventVenue">venue</a>, via the &#8216;<a href="http://schema.org/location">location</a>&#8216; predicate:</p>
<p><a href="http://www.johngoodwin.me.uk/venue/The-Garage-Aberdeen">http://www.johngoodwin.me.uk/venue/The-Garage-Aberdeen</a></p>
<p>I have related each of the venues to locations in the <a href="http://data.ordnancesurvey.co.uk">Ordnance Survey Linked Data</a> using the <a href="http://schema.org/containedIn">contained in</a> predicate.</p>
<p>For each of the events I have included further markup such as the <a href="http://schema.org/startDate">start date</a>, <a href="http://schema.org/endDate">end date,</a> ticket sites (via the <a href="http://schema.org/offers">offers</a> predicate) and also links to other pages about the event via <a href="http://schema.org/sameAs">sameAs</a>. Similarly I have linked pages about each venue to other pages about that venue via <a href="http://schema.org/sameAs">sameAs</a>.</p>
<p>All of the markup is done using <a href="http://en.wikipedia.org/wiki/RDFa">RDFa</a>. You can view the machine readable content using the <a href="http://www.google.com/webmasters/tools/richsnippets">Google Structured Data Testing tool</a> or this <a href="http://www.w3.org/2012/pyRdfa/">RDFa Parser</a>. Here are some examples:</p>
<p>New Model Army UK Winter Tour 2013: <a href="http://www.google.com/webmasters/tools/richsnippets?q=http%3A%2F%2Fwww.johngoodwin.me.uk%2Fevent%2Fnewmodelarmy-uk-wintertour-2013">rich snippets</a>, <a href="http://www.w3.org/2012/pyRdfa/extract?uri=http%3A%2F%2Fwww.johngoodwin.me.uk%2Fevent%2Fnewmodelarmy-uk-wintertour-2013&amp;format=xml&amp;rdfagraph=output&amp;vocab_expansion=false&amp;rdfa_lite=false&amp;embedded_rdf=true&amp;space_preserve=true&amp;vocab_cache=true&amp;vocab_cache_report=false&amp;vocab_cache_refresh=false">RDFa distiller</a></p>
<p>Aberdeen tour date: <a href="http://www.google.com/webmasters/tools/richsnippets?q=http%3A%2F%2Fwww.johngoodwin.me.uk%2Fevent%2Fnewmodelarmy-uk-Aberdeen-20131112">rich snippets</a>, <a href="http://www.w3.org/2012/pyRdfa/extract?uri=http%3A%2F%2Fwww.johngoodwin.me.uk%2Fevent%2Fnewmodelarmy-uk-Aberdeen-20131112&amp;format=xml&amp;rdfagraph=output&amp;vocab_expansion=false&amp;rdfa_lite=false&amp;embedded_rdf=true&amp;space_preserve=true&amp;vocab_cache=true&amp;vocab_cache_report=false&amp;vocab_cache_refresh=false">RDFa distiller</a></p>
<p>The Garage Aberdeen (venue): <a href="http://www.google.com/webmasters/tools/richsnippets?q=http%3A%2F%2Fwww.johngoodwin.me.uk%2Fvenue%2FThe-Garage-Aberdeen">rich snippets</a>, <a href="http://www.w3.org/2012/pyRdfa/extract?uri=http%3A%2F%2Fwww.johngoodwin.me.uk%2Fvenue%2FThe-Garage-Aberdeen&amp;format=xml&amp;rdfagraph=output&amp;vocab_expansion=false&amp;rdfa_lite=false&amp;embedded_rdf=true&amp;space_preserve=true&amp;vocab_cache=true&amp;vocab_cache_report=false&amp;vocab_cache_refresh=false">RDFa distiller</a></p>
<p>Mapping is provided by <a href="http://www.ordnancesurvey.co.uk/innovate/innovate-with-open-space.html">OS OpenSpace</a>.</p>
<p><strong>Extra:</strong> someone asked me what the experiment was. Maybe not much of an experiment really, but simply put I&#8217;m curious to find out what happens should these pages get picked up by Google et al., and curious to see what they do with them.</p><br />  <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gocomments/johngoodwin225.wordpress.com/381/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/johngoodwin225.wordpress.com/381/" /></a> <img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=381&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></content:encoded>
	</item>
<item rdf:about="http://johngoodwin225.wordpress.com/2013/08/20/ordnance-survey-linked-data-plotting-sparql-query-results-in-os-openspace/">
	<title>Putting SPARQL on the Map with Ordnance Survey Linked Data &amp; OS OpenSpace</title>
	<link>http://johngoodwin225.wordpress.com/2013/08/20/ordnance-survey-linked-data-plotting-sparql-query-results-in-os-openspace/</link>
	<dc:date>2013-08-20T13:29:54Z</dc:date>
	<dc:creator><![CDATA[John Goodwin]]></dc:creator>
			<dc:subject><![CDATA[linked data]]></dc:subject>
		<dc:subject><![CDATA[Semantic Web]]></dc:subject>
		<dc:subject><![CDATA[Ordnance Survey]]></dc:subject>
		<dc:subject><![CDATA[OS OpenSpace]]></dc:subject>
	<description><![CDATA[A colleague was asking me if I knew how to plot SPARQL query results from the Ordnance Survey linked data onto an OS OpenSpace map. Although I&#8217;d done it a few times before, it was never something I&#8217;d blogged. So here goes&#8230; This is a lot easier than you might imagine. The first thing you [&#8230;]<img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=367&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></description>
	<content:encoded><![CDATA[<p>A colleague was asking me if I knew how to plot SPARQL query results from the <a href="http://data.ordnancesurvey.co.uk">Ordnance Survey linked data</a> onto an <a href="http://www.ordnancesurvey.co.uk/innovate/innovate-with-open-space.html">OS OpenSpace</a> map. Although I&#8217;d done it a few times before, it was never something I&#8217;d blogged. So here goes&#8230;</p>
<p>This is a lot easier than you might imagine. The first thing you want to do is perform your SPARQL query and get back the results as a csv file. I <a href="https://johngoodwin225.wordpress.com/2013/08/01/ordnance-survey-linked-data-simple-sparql-example/">blogged</a> about this a while back, but here is a quick recap. Let us suppose I want to plot a centroid for all the districts in <a href="http://data.ordnancesurvey.co.uk/id/country/england">England</a>, and have their name appear in the pop up text. It is easy to perform a query to get back the easting, northing and name for all the districts. First go to the <a href="http://data.ordnancesurvey.co.uk/datasets/boundary-line/explorer/sparql">Boundary-Line(TM) SPARQL endpoint</a> and enter the following query:</p>
<p><strong>select ?x ?y ?name</strong><br />
<strong>where</strong><br />
<strong>{</strong><br />
<strong>?a &lt;<a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a>&gt; ?name .</strong><br />
<strong>?a &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/easting">http://data.ordnancesurvey.co.uk/ontology/spatialrelations/easting</a>&gt; ?x .</strong><br />
<strong>?a &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/spatialrelations/northing">http://data.ordnancesurvey.co.uk/ontology/spatialrelations/northing</a>&gt; ?y .</strong><br />
<strong>?a a &lt;<a href="http://data.ordnancesurvey.co.uk/ontology/admingeo/District">http://data.ordnancesurvey.co.uk/ontology/admingeo/District</a>&gt; .</strong><br />
<strong>}</strong></p>
<p>Make sure the response format is set to CSV. Now click the query button. The &#8220;Reponse&#8221; box will have your query results, and the &#8220;Request box&#8221; should have a long complicated looking URL:</p>
<pre><a href="http://data.ordnancesurvey.co.uk/datasets/boundary-line/apis/sparql?query=select+%3Fx+%3Fy+%3Fname%0D%0Awhere%0D%0A%7B%0D%0A%3Fa+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23label%3E+%3Fname+.%0D%0A%3Fa+%3Chttp%3A%2F%2Fdata.ordnancesurvey.co.uk%2Fontology%2Fspatialrelations%2Feasting%3E+%3Fx+.%0D%0A%3Fa+%3Chttp%3A%2F%2Fdata.ordnancesurvey.co.uk%2Fontology%2Fspatialrelations%2Fnorthing%3E+%3Fy+.%0D%0A%3Fa+a+%3Chttp%3A%2F%2Fdata.ordnancesurvey.co.uk%2Fontology%2Fadmingeo%2FDistrict%3E+.%0D%0A%7D&amp;output=csv">http://data.ordnancesurvey.co.uk/datasets/boundary-line/apis/sparql?query=select+%3Fx+%3Fy+%3Fname%0D%0Awhere%0D%0A%7B%0D%0A%3Fa+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23label%3E+%3Fname+.%0D%0A%3Fa+%3Chttp%3A%2F%2Fdata.ordnancesurvey.co.uk%2Fontology%2Fspatialrelations%2Feasting%3E+%3Fx+.%0D%0A%3Fa+%3Chttp%3A%2F%2Fdata.ordnancesurvey.co.uk%2Fontology%2Fspatialrelations%2Fnorthing%3E+%3Fy+.%0D%0A%3Fa+a+%3Chttp%3A%2F%2Fdata.ordnancesurvey.co.uk%2Fontology%2Fadmingeo%2FDistrict%3E+.%0D%0A%7D&amp;output=csv</a></pre>
<p>So far so easy.</p>
<p>Now we come to the OS OpenSpace part. It is easy to plot a text file in OS OpenSpace. To find out how go to the <a href="http://www.ordnancesurvey.co.uk/business-and-government/help-and-support/web-services/code-playground.html">OS OpenSpace Code Playground</a> and select the link &#8220;<a href="http://openspacejseditor.ordnancesurvey.co.uk/viewer/esefim/10/#preview">Add markers and text from a file</a>&#8220;. You should see an example mashup showing some points plotted. To see what is going on click on &#8220;<a href="http://openspacejseditor.ordnancesurvey.co.uk/viewer/esefim/10/edit">Edit in Code Playground</a>&#8221; and you should see the javascript &amp; HTML that produces the map. In the Javascript window you can edit the code and preview the changes. For this example the first simple thing you need to do is adjust the zoom level. To do this change:</p>
<p><strong>Â Â Â  osMap.setCenter(new OpenSpace.MapPoint(400000, 400000), 7);</strong></p>
<p>to</p>
<p><strong>Â Â Â  osMap.setCenter(new OpenSpace.MapPoint(400000, 400000), 1);</strong></p>
<p>so we are zoomed all the way out.</p>
<p>We now need to change the input text file. To do this change the following line in the sample code:</p>
<p><strong>Â Â Â  var markersFile = &#8220;/res/mymarkers.txt&#8221;;</strong></p>
<p>In this line replace <strong>/res/mymarkers.txt</strong> with the URL you got from the SPARQL endpoint in the Request box. Once you have done that click the &#8216;render&#8217; button and you should now see your results plotted on an OS OpenSpace map. Click on a map pointer to display the name of the district. Easy as that.</p>
<p>As an exercise to the reader&#8230;consult my last few blog posts and display markers for postcodes in a district of your choosing.</p><br />  <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gocomments/johngoodwin225.wordpress.com/367/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/johngoodwin225.wordpress.com/367/" /></a> <img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=johngoodwin225.wordpress.com&#038;blog=4667458&#038;post=367&#038;subd=johngoodwin225&#038;ref=&#038;feed=1" width="1" height="1" />]]></content:encoded>
	</item>
</rdf:RDF>